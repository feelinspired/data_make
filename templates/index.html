<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Whisperer - Smart Field Mapping</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>ğŸ”® Data Whisperer</h1>
            <p class="subtitle">Intelligent field mapping between JSON structures</p>
        </header>

        <!-- Input Section -->
        <section class="input-section">
            <div class="input-grid">
                <div class="input-box">
                    <label for="sourceJson">
                        <span class="label-icon">ğŸ“¥</span>
                        Source JSON (App A)
                    </label>
                    <textarea 
                        id="sourceJson" 
                        placeholder='{"customer_id": "12345", "full_name": "John Doe", "email_address": "john@example.com"}'
                        rows="10"
                    ></textarea>
                </div>
                
                <div class="input-box">
                    <label for="targetJson">
                        <span class="label-icon">ğŸ“¤</span>
                        Target JSON (App B)
                    </label>
                    <textarea 
                        id="targetJson" 
                        placeholder='{"userId": "", "name": "", "email": ""}'
                        rows="10"
                    ></textarea>
                </div>
            </div>
            
            <div class="action-buttons">
                <button id="analyzeBtn" class="btn btn-primary">
                    âœ¨ Analyze & Suggest Mappings
                </button>
                <button id="loadExampleBtn" class="btn btn-secondary">
                    ğŸ“‹ Load Example Data
                </button>
            </div>
            
            <div id="errorMessage" class="error-message" style="display: none;"></div>
            <div id="successMessage" class="success-message" style="display: none;"></div>
        </section>

        <!-- Mapping Section -->
        <section id="mappingSection" class="mapping-section" style="display: none;">
            <h2>Field Mappings</h2>
            <p class="section-description">
                Review and adjust the suggested field mappings. Higher confidence scores indicate better matches.
            </p>
            
            <div class="table-container">
                <table id="mappingTable">
                    <thead>
                        <tr>
                            <th>Source Field</th>
                            <th>â†’</th>
                            <th>Target Field</th>
                            <th>Transform</th>
                            <th>Confidence</th>
                        </tr>
                    </thead>
                    <tbody id="mappingTableBody">
                        <!-- Rows will be inserted dynamically -->
                    </tbody>
                </table>
            </div>
            
            <div class="action-buttons">
                <button id="previewBtn" class="btn btn-primary">
                    ğŸ‘ï¸ Preview Transformation
                </button>
                <button id="exportBtn" class="btn btn-success">
                    ğŸ’¾ Export Mapping Config
                </button>
            </div>
        </section>

        <!-- Preview Section -->
        <section id="previewSection" class="preview-section" style="display: none;">
            <h2>Transformation Preview</h2>
            <p class="section-description">
                Preview of your source data transformed using the current mappings.
            </p>
            
            <div class="preview-grid">
                <div class="preview-box">
                    <h3>Original (Source)</h3>
                    <pre id="originalPreview" class="json-preview"></pre>
                </div>
                
                <div class="preview-arrow">â†’</div>
                
                <div class="preview-box">
                    <h3>Transformed (Target)</h3>
                    <pre id="transformedPreview" class="json-preview"></pre>
                </div>
            </div>
        </section>

        <!-- Export Modal -->
        <div id="exportModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>ğŸ“‹ Mapping Configuration</h2>
                <p>Copy this configuration to use in your integration:</p>
                <pre id="exportedConfig" class="json-preview"></pre>
                <div class="modal-actions">
                    <button id="copyConfigBtn" class="btn btn-primary">
                        ğŸ“‹ Copy to Clipboard
                    </button>
                    <button id="downloadConfigBtn" class="btn btn-secondary">
                        â¬‡ï¸ Download JSON
                    </button>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer>
            <p>Made with â¤ï¸ by Data Whisperer | Smart field mapping for seamless integrations</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
